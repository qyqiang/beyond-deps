{"version":3,"file":"use-predefine.js","sources":["../../../../../../../packages/components/color-picker-panel/src/composables/use-predefine.ts"],"sourcesContent":["import { computed, inject, ref, watch, watchEffect } from 'vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { PredefineProps } from '../props/predefine'\nimport { colorPickerPanelContextKey } from '../color-picker-panel'\nimport Color from '../utils/color'\n\nimport type { Ref } from 'vue'\n\nexport const usePredefine = (props: PredefineProps) => {\n  const { currentColor } = inject(colorPickerPanelContextKey)!\n\n  const rgbaColors = ref(parseColors(props.colors, props.color)) as Ref<Color[]>\n\n  watch(\n    () => currentColor.value,\n    (val) => {\n      const color = new Color({\n        value: val,\n        enableAlpha: props.enableAlpha,\n      })\n\n      rgbaColors.value.forEach((item) => {\n        item.selected = color.compare(item)\n      })\n    }\n  )\n\n  watchEffect(() => {\n    rgbaColors.value = parseColors(props.colors, props.color)\n  })\n\n  function handleSelect(index: number) {\n    props.color.fromString(props.colors[index])\n  }\n\n  function parseColors(colors: string[], color: Color) {\n    return colors.map((value) => {\n      const c = new Color({\n        value,\n        enableAlpha: props.enableAlpha,\n      })\n      c.selected = c.compare(color)\n      return c\n    })\n  }\n\n  return {\n    rgbaColors,\n    handleSelect,\n  }\n}\n\nexport const usePredefineDOM = (props: PredefineProps) => {\n  const ns = useNamespace('color-predefine')\n\n  const rootKls = computed(() => [ns.b(), ns.is('disabled', props.disabled)])\n\n  const colorsKls = computed(() => ns.e('colors'))\n\n  function colorSelectorKls(item: Color) {\n    return [\n      ns.e('color-selector'),\n      ns.is('alpha', item.get('alpha') < 100),\n      { selected: item.selected },\n    ]\n  }\n\n  return {\n    rootKls,\n    colorsKls,\n    colorSelectorKls,\n  }\n}\n"],"names":["inject","colorPickerPanelContextKey","ref","watch","color","Color","watchEffect","useNamespace","computed"],"mappings":";;;;;;;;;AAIY,MAAC,YAAY,GAAG,CAAC,KAAK,KAAK;AACvC,EAAE,MAAM,EAAE,YAAY,EAAE,GAAGA,UAAM,CAACC,2CAA0B,CAAC,CAAC;AAC9D,EAAE,MAAM,UAAU,GAAGC,OAAG,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;AACjE,EAAEC,SAAK,CAAC,MAAM,YAAY,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK;AAC3C,IAAI,MAAMC,OAAK,GAAG,IAAIC,gBAAK,CAAC;AAC5B,MAAM,KAAK,EAAE,GAAG;AAChB,MAAM,WAAW,EAAE,KAAK,CAAC,WAAW;AACpC,KAAK,CAAC,CAAC;AACP,IAAI,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;AACvC,MAAM,IAAI,CAAC,QAAQ,GAAGD,OAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC1C,KAAK,CAAC,CAAC;AACP,GAAG,CAAC,CAAC;AACL,EAAEE,eAAW,CAAC,MAAM;AACpB,IAAI,UAAU,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;AAC9D,GAAG,CAAC,CAAC;AACL,EAAE,SAAS,YAAY,CAAC,KAAK,EAAE;AAC/B,IAAI,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;AAChD,GAAG;AACH,EAAE,SAAS,WAAW,CAAC,MAAM,EAAEF,OAAK,EAAE;AACtC,IAAI,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AACjC,MAAM,MAAM,CAAC,GAAG,IAAIC,gBAAK,CAAC;AAC1B,QAAQ,KAAK;AACb,QAAQ,WAAW,EAAE,KAAK,CAAC,WAAW;AACtC,OAAO,CAAC,CAAC;AACT,MAAM,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAACD,OAAK,CAAC,CAAC;AACpC,MAAM,OAAO,CAAC,CAAC;AACf,KAAK,CAAC,CAAC;AACP,GAAG;AACH,EAAE,OAAO;AACT,IAAI,UAAU;AACd,IAAI,YAAY;AAChB,GAAG,CAAC;AACJ,EAAE;AACU,MAAC,eAAe,GAAG,CAAC,KAAK,KAAK;AAC1C,EAAE,MAAM,EAAE,GAAGG,kBAAY,CAAC,iBAAiB,CAAC,CAAC;AAC7C,EAAE,MAAM,OAAO,GAAGC,YAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC9E,EAAE,MAAM,SAAS,GAAGA,YAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AACnD,EAAE,SAAS,gBAAgB,CAAC,IAAI,EAAE;AAClC,IAAI,OAAO;AACX,MAAM,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC;AAC5B,MAAM,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC;AAC7C,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE;AACjC,KAAK,CAAC;AACN,GAAG;AACH,EAAE,OAAO;AACT,IAAI,OAAO;AACX,IAAI,SAAS;AACb,IAAI,gBAAgB;AACpB,GAAG,CAAC;AACJ;;;;;"}