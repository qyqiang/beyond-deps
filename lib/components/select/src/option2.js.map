{"version":3,"file":"option2.js","sources":["../../../../../../packages/components/select/src/option.vue"],"sourcesContent":["<template>\n  <li\n    v-show=\"visible\"\n    :id=\"id\"\n    :class=\"containerKls\"\n    role=\"option\"\n    :aria-disabled=\"isDisabled || undefined\"\n    :aria-selected=\"itemSelected\"\n    @mousemove=\"hoverItem\"\n    @click.stop=\"selectOptionClick\"\n    @mouseenter=\"handleCellMouseEnter\"\n  >\n    <slot>\n      <div class=\"option-wrap\">\n        <el-tooltip\n          ref=\"tooltipRef\"\n          effect=\"light\"\n          :disabled=\"!showTip || disabled\"\n          :content=\"currentLabel\"\n          :placement=\"placement\"\n          popper-class=\"optionPopperClass\"\n        >\n          <div class=\"option-wrap-content\">\n            <slot name=\"optionIcon\"></slot>\n            <span\n              class=\"select-label\"\n              :class=\"{ 'select-margin': $slots?.optionIcon }\"\n              >{{ currentLabel }}</span\n            >\n          </div>\n        </el-tooltip>\n        <div v-show=\"itemSelected\" class=\"option-wrap-icon\">\n          <el-icon size=\"16px\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 16 16\"\n              fill=\"none\"\n            >\n              <path\n                d=\"M5.20006 14.2833C4.97716 14.2834 4.75643 14.2395 4.55052 14.1542C4.3446 14.0688 4.15754 13.9437 4.00006 13.786L0.292725 10.0807L1.70739 8.66665L5.20006 12.1593L14.2927 3.06665L15.7074 4.48065L6.40006 13.786C6.24257 13.9437 6.05552 14.0688 5.8496 14.1542C5.64369 14.2395 5.42296 14.2834 5.20006 14.2833Z\"\n                fill=\"#2A3F4D\"\n              />\n            </svg>\n          </el-icon>\n        </div>\n      </div>\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  nextTick,\n  onBeforeUnmount,\n  reactive,\n  ref,\n  toRefs,\n  unref,\n} from 'vue'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { useOption } from './useOption'\nimport { COMPONENT_NAME, optionProps } from './option'\nimport ElIcon from '@element-plus/components/icon'\nimport ElTooltip from '@element-plus/components/tooltip'\n\nimport type {\n  OptionExposed,\n  OptionInternalInstance,\n  OptionStates,\n} from './type'\n\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  componentName: COMPONENT_NAME,\n  components: {\n    ElIcon,\n    ElTooltip,\n  },\n  props: optionProps,\n\n  setup(props) {\n    const ns = useNamespace('select')\n    const id = useId()\n    const disabled = ref(false)\n    const containerKls = computed(() => [\n      ns.be('dropdown', 'item'),\n      ns.is('disabled', unref(isDisabled)),\n      ns.is('selected', unref(itemSelected)),\n      ns.is('hovering', unref(hover)),\n    ])\n\n    const states = reactive<OptionStates>({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false,\n    })\n\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n    } = useOption(props, states)\n\n    const { visible, hover } = toRefs(states)\n\n    const vm = (getCurrentInstance()! as OptionInternalInstance).proxy\n\n    select.onOptionCreate(vm)\n\n    onBeforeUnmount(() => {\n      const key = vm.value\n\n      // if option is not selected, remove it from cache\n      nextTick(() => {\n        const { selected: selectedOptions } = select.states\n        const doesSelected = selectedOptions.some((item) => {\n          return item.value === vm.value\n        })\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key)\n        }\n      })\n      select.onOptionDestroy(key, vm)\n    })\n\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm)\n      }\n    }\n    function isGreaterThan(a: number, b: number, epsilon = 0.03) {\n      return a - b > epsilon\n    }\n    const getPadding = (el: HTMLElement) => {\n      const style = window.getComputedStyle(el, null)\n      const paddingLeft = Number.parseInt(style.paddingLeft, 10) || 0\n      const paddingRight = Number.parseInt(style.paddingRight, 10) || 0\n      const paddingTop = Number.parseInt(style.paddingTop, 10) || 0\n      const paddingBottom = Number.parseInt(style.paddingBottom, 10) || 0\n      return {\n        left: paddingLeft,\n        right: paddingRight,\n        top: paddingTop,\n        bottom: paddingBottom,\n      }\n    }\n    const handleCellMouseEnter = (event: MouseEvent) => {\n      const cellChild = (event.target as HTMLElement).querySelector(\n        '.option-wrap-content'\n      ) as HTMLElement\n      if (!cellChild) return\n      if (cellChild && !cellChild?.childNodes.length) {\n        disabled.value = false\n        return\n      }\n\n      const range = document.createRange()\n      range.setStart(cellChild, 0)\n      range.setEnd(cellChild, cellChild.childNodes.length)\n      const { width: rangeWidth, height: rangeHeight } =\n        range.getBoundingClientRect()\n      const { width: cellChildWidth, height: cellChildHeight } =\n        cellChild.getBoundingClientRect()\n\n      const { top, left, right, bottom } = getPadding(cellChild)\n      const horizontalPadding = left + right\n      const verticalPadding = top + bottom\n      disabled.value = !(\n        isGreaterThan(rangeWidth + horizontalPadding, cellChildWidth) ||\n        isGreaterThan(rangeHeight + verticalPadding, cellChildHeight) ||\n        isGreaterThan(cellChild.scrollWidth, cellChildWidth)\n      )\n    }\n\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      visible,\n      hover,\n      states,\n      disabled,\n      showTip: props.showTip,\n      placement: props.placement,\n      handleCellMouseEnter,\n      hoverItem,\n      updateOption,\n      selectOptionClick,\n    } satisfies OptionExposed\n  },\n})\n</script>\n"],"names":["defineComponent","COMPONENT_NAME","ElIcon","ElTooltip","optionProps","useNamespace","useId","ref","computed","unref","reactive","useOption","toRefs","getCurrentInstance","onBeforeUnmount","nextTick","_normalizeClass","_withModifiers","_renderSlot","_createElementVNode","_createVNode","_withCtx","_toDisplayString","_withDirectives","_vShow"],"mappings":"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"}